<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tracker ‚Äî Presentaci√≥n</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-1: #071019;
      --bg-2: #0f3a45;
      --glass: rgba(255,255,255,0.06);
      --accent: #00d4ff;
      --muted: rgba(255,255,255,0.75);
      --card-radius: 18px;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg,var(--bg-1),var(--bg-2));
      color:#fff; -webkit-font-smoothing:antialiased; overflow-x:hidden; padding-bottom:40px;
    }

    header{
      text-align:center;padding:48px 18px 22px; font-size:2.4rem; letter-spacing:2px; font-weight:800;
      animation:slideDown .9s cubic-bezier(.2,.9,.3,1);
    }
    @keyframes slideDown{from{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:none}}

    .container{max-width:1100px;margin:0 auto;padding:18px}

    .hero{display:grid;grid-template-columns:1fr 420px;gap:28px;align-items:center;margin-top:8px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:var(--card-radius);padding:18px;box-shadow:0 8px 30px rgba(2,6,23,0.5);backdrop-filter: blur(6px)}

    .video-wrap{display:flex;flex-direction:column;gap:12px}
    .video-container {
      position: relative;
      width: 100%;
      border-radius: 14px;
      overflow: hidden;
      transition: all 0.9s cubic-bezier(.2,.9,.3,1);
    }
    
    /* Cuando el video est√° rotado, expandir horizontalmente */
    .video-container.expanded {
      width: 120%;
      margin-left: -10%;
    }
    
    .video-wrapper {
      transform: scaleX(-1); /* Corrige el espejo en PC */
      transform-origin: center;
      transition: transform 0.9s cubic-bezier(.2,.9,.3,1);
    }
    
    /* En m√≥viles, quitar el espejo */
    @media (max-width: 768px) {
      .video-wrapper {
        transform: scaleX(1); /* Sin espejo en m√≥viles */
      }
    }
    
    .video-wrapper.rotated {
      transform: scaleX(-1) rotate(90deg); /* Rotaci√≥n + espejo en PC */
    }
    
    /* Rotaci√≥n diferente para m√≥viles */
    @media (max-width: 768px) {
      .video-wrapper.rotated {
        transform: scaleX(1) rotate(-90deg); /* Rotaci√≥n sin espejo en m√≥viles */
      }
    }

    video{
      width:100%;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.06);
      box-shadow:0 10px 40px rgba(0,0,0,0.6);
    }

    /* Controles personalizados */
    .custom-controls {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
      padding: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .video-container:hover .custom-controls {
      opacity: 1;
    }
    
    .progress-container {
      width: 100%;
      height: 6px;
      background: rgba(255,255,255,0.2);
      border-radius: 3px;
      cursor: pointer;
      overflow: hidden;
    }
    
    .progress-bar {
      height: 100%;
      background: var(--accent);
      width: 0%;
      border-radius: 3px;
      transition: width 0.1s;
    }
    
    .controls-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .play-pause-btn {
      background: none;
      border: none;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      padding: 5px;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
    }
    
    .play-pause-btn:hover {
      background: rgba(255,255,255,0.1);
    }
    
    .time-display {
      font-size: 0.9rem;
      color: white;
    }
    
    .volume-control {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .volume-slider {
      width: 70px;
      height: 4px;
      background: rgba(255,255,255,0.2);
      border-radius: 2px;
      cursor: pointer;
    }
    
    .volume-level {
      height: 100%;
      background: white;
      border-radius: 2px;
      width: 70%;
    }

    .video-meta{display:flex;justify-content:space-between;align-items:center}
    .badge{background:linear-gradient(90deg,var(--accent),#5affc3);padding:6px 10px;border-radius:999px;color:#042; font-weight:700;font-size:.9rem}

    .tech-row{display:flex;flex-direction:column;gap:14px;align-items:center;margin-top:28px}
    .logos{display:flex;gap:18px;align-items:center;justify-content:center;flex-wrap:wrap}
    .logo{width:76px;height:76px;padding:12px;border-radius:12px;background:var(--glass);display:flex;align-items:center;justify-content:center;transition:transform .25s, box-shadow .25s}
    .logo img{max-width:100%;max-height:100%;filter:invert(1) contrast(120%)}
    .logo:hover{transform:translateY(-6px) scale(1.04);box-shadow:0 14px 40px rgba(0,0,0,0.5)}

    .tech-details{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:18px}
    .tech-card{padding:14px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04);min-height:160px;display:flex;flex-direction:column;gap:10px}
    .tech-card h3{font-size:1.05rem;margin-top:6px}
    .tech-card p{font-size:.93rem;color:var(--muted);line-height:1.45}
    .tech-card .list{margin-top:auto;font-size:.88rem;color:rgba(255,255,255,0.85)}
    .tech-card .pill{display:inline-block;background:rgba(255,255,255,0.03);padding:6px 8px;border-radius:8px;margin-right:6px;margin-top:8px;font-weight:600}

    .about{margin-top:28px;text-align:left;line-height:1.6;font-size:1rem;color:rgba(255,255,255,0.95)}

    footer{text-align:center;margin-top:36px;color:rgba(255,255,255,0.6);font-size:.9rem}

    .reveal{opacity:0;transform:translateY(18px);animation:revealUp .9s forwards;animation-delay:.25s}
    @keyframes revealUp{to{opacity:1;transform:none}}

    @media (max-width:980px){
      .hero{grid-template-columns:1fr;}
      .tech-details{grid-template-columns:1fr;}
      .logo{width:66px;height:66px}
    }
    
    @media (max-width:768px) {
      /* En m√≥viles, expandir m√°s cuando el video rota */
      .video-container.expanded {
        width: 140%;
        margin-left: -20%;
      }
    }
    
    @media (max-width:520px){
      header{font-size:1.4rem;padding-top:30px}
      .logo{width:56px;height:56px}
      
      /* En m√≥viles peque√±os, expandir a√∫n m√°s */
      .video-container.expanded {
        width: 160%;
        margin-left: -30%;
      }
      
      .video-meta {
        flex-direction: column;
        gap: 8px;
        align-items: flex-start;
      }
      
      /* Ajustar controles para m√≥viles */
      .controls-row {
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
      }
      
      .volume-control {
        order: 3;
        width: 100%;
        justify-content: center;
        margin-top: 5px;
      }
    }

    .muted{color:var(--muted);font-size:.92rem}
  </style>
</head>
<body>
  <header>TRACKER DE VALORES AUTOMATIZADO</header>

  <div class="container">
    <div class="hero">
      <div class="card reveal video-wrap">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div style="font-weight:700;font-size:1.05rem">Demostraci√≥n del flujo</div>
            <div class="muted" style="font-size:.9rem">Reproduzca el video para ver la interfaz y el flujo de datos</div>
          </div>
          <div class="badge">Automatizado</div>
        </div>

        <div class="video-container" id="videoContainer">
          <div class="video-wrapper" id="videoWrapper">
            <video id="projectVideo" preload="metadata">
              <source src="Tracker2.mp4" type="video/mp4">
              Tu navegador no soporta video HTML5.
            </video>
          </div>
          
          <!-- Controles personalizados -->
          <div class="custom-controls">
            <div class="progress-container" id="progressContainer">
              <div class="progress-bar" id="progressBar"></div>
            </div>
            
            <div class="controls-row">
              <button class="play-pause-btn" id="playPauseBtn">
                <span id="playIcon">‚ñ∂</span>
              </button>
              
              <div class="time-display">
                <span id="currentTime">0:00</span> / <span id="duration">0:00</span>
              </div>
              
              <div class="volume-control">
                <button class="play-pause-btn" id="muteBtn">
                  <span id="volumeIcon">üîä</span>
                </button>
                <div class="volume-slider" id="volumeSlider">
                  <div class="volume-level" id="volumeLevel"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="video-meta" style="margin-top:8px">
          <div class="muted">Duraci√≥n: --:--</div>
          <div class="muted">Captura de mediciones ‚Ä¢ Exportaci√≥n a Excel</div>
        </div>
      </div>

      <div class="card reveal" style="min-height:260px;display:flex;flex-direction:column;gap:12px;justify-content:center">
        <div style="font-weight:800">Flujo de datos ‚Äî Resumen</div>
        <div class="muted">Este proyecto integra distintos bloques: captura y an√°lisis por Python, UI en React y servidor Node.js que procesa y exporta a Excel.</div>

        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:12px">
          <div style="background:rgba(255,255,255,0.03);padding:8px 10px;border-radius:10px;font-weight:700">Python ‚Üí React ‚Üí Node.js</div>
          <div style="background:rgba(255,255,255,0.03);padding:8px 10px;border-radius:10px;font-weight:700">OCR ‚Ä¢ Detecci√≥n Inteligente</div>
          <div style="background:rgba(255,255,255,0.03);padding:8px 10px;border-radius:10px;font-weight:700">Exportaci√≥n Excel</div>
        </div>

        <div style="margin-top:12px" class="muted">Descripci√≥n r√°pida: el m√≥dulo Python captura v√≠deo/webcam, realiza detecci√≥n y OCR para extraer valores de torque. Los datos pasan a la interfaz React para visualizaci√≥n en tiempo real y desde all√≠ se env√≠an al servidor Node.js que analiza lotes y genera el Excel final.</div>
      </div>
    </div>

    <section class="tech-row">
      <div style="text-align:center;font-weight:700;font-size:1.05rem">‚¨á Tecnolog√≠as utilizadas ‚¨á</div>

      <div class="logos">
        <div class="logo" title="Python">
          <img src="https://upload.wikimedia.org/wikipedia/commons/c/c3/Python-logo-notext.svg" alt="Python logo">
        </div>
        <div class="logo" title="React">
          <img src="https://upload.wikimedia.org/wikipedia/commons/a/a7/React-icon.svg" alt="React logo">
        </div>
        <div class="logo" title="Node.js">
          <img src="https://upload.wikimedia.org/wikipedia/commons/d/d9/Node.js_logo.svg" alt="Node.js logo">
        </div>
        <div class="logo" title="OpenCV">
          <img src="https://opencv.org/wp-content/uploads/2020/07/cropped-OpenCV_logo.png" alt="OpenCV logo">
        </div>
        <div class="logo" title="Tesseract OCR">
          <img src="https://raw.githubusercontent.com/tesseract-ocr/tesseract/master/doc/tesseract.png" alt="Tesseract logo">
        </div>
      </div>

      <div class="tech-details">
        <div class="tech-card">
          <strong style="font-size:1rem">Python ‚Äî Motor de captura y an√°lisis</strong>
          <p>Python se utiliz√≥ como n√∫cleo del tracker: captura de video o frames desde webcam, preprocesado de imagen (filtros, binarizaci√≥n), detecci√≥n inteligente de las regiones donde aparecen los valores y OCR para extraer texto num√©rico.</p>
          <div class="list"><span class="pill">OpenCV</span><span class="pill">NumPy</span><span class="pill">Tesseract</span></div>
        </div>

        <div class="tech-card">
          <strong style="font-size:1rem">React ‚Äî Interfaces web responsivas</strong>
          <p>React construye la interfaz en la que el operador ve el flujo de valores en tiempo real, gr√°ficos, estado de la corrida y controles para iniciar/parar. Se prioriz√≥ la usabilidad m√≥vil y animaciones suaves para mejorar la experiencia del usuario.</p>
          <div class="list"><span class="pill">React Router</span><span class="pill">JSX</span><span class="pill">Tailwind</span></div>
        </div>

        <div class="tech-card">
          <strong style="font-size:1rem">Node.js ‚Äî Servidor y procesamiento</strong>
          <p>Node.js act√∫a como servidor que recibe los paquetes de datos enviados desde la UI (React). Adem√°s realiza procesamiento por lotes, validaciones, c√°lculo de promedios y genera un archivo Excel con las mediciones finales.</p>
          <div class="list"><span class="pill">Express</span><span class="pill">ExcelJS</span><span class="pill">Socket.IO</span></div>
        </div>
      </div>

      <div class="about card" style="margin-top:8px">
        <h3 style="margin-bottom:8px">Sobre el funcionamiento en detalle</h3>
        <p>1) El m√≥dulo Python captura frames de v√≠deo (o lee un archivo). Mediante OpenCV se localizan las zonas relevantes del medidor. Se aplican transformaciones (umbral, correcci√≥n de perspectiva) y luego se ejecuta Tesseract (u otro OCR) para extraer los d√≠gitos. Se filtran y validan los valores mediante reglas (rango esperado, suavizado temporal).</p>
        <p>2) Los valores extra√≠dos se empaquetan y se env√≠an a la interfaz React (ej.: mediante una petici√≥n REST o WebSocket) para mostrar en tiempo real y permitir la interacci√≥n del operador.</p>
        <p>3) Cuando la corrida finaliza (30 mediciones) la UI env√≠a a Node.js el lote completo. El servidor aplica validaciones adicionales, calcula promedios y genera un archivo Excel con formato claro (columnas, promedios, timestamps). Este Excel se puede descargar desde la UI o almacenarse en un repositorio en red.</p>
      </div>
    </section>

    <footer>¬© 2025 ‚Äî Tracker de Valores Automatizado ‚Ä¢ Soluciones SOSA</footer>
  </div>

  <script>
    const video = document.getElementById('projectVideo');
    const wrapper = document.getElementById('videoWrapper');
    const videoContainer = document.getElementById('videoContainer');
    const playPauseBtn = document.getElementById('playPauseBtn');
    const playIcon = document.getElementById('playIcon');
    const progressBar = document.getElementById('progressBar');
    const progressContainer = document.getElementById('progressContainer');
    const currentTimeEl = document.getElementById('currentTime');
    const durationEl = document.getElementById('duration');
    const muteBtn = document.getElementById('muteBtn');
    const volumeIcon = document.getElementById('volumeIcon');
    const volumeSlider = document.getElementById('volumeSlider');
    const volumeLevel = document.getElementById('volumeLevel');

    // Detectar si es m√≥vil
    const isMobile = window.innerWidth <= 768;

    // Formatear tiempo en minutos:segundos
    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
    }

    // Actualizar barra de progreso y tiempo
    function updateProgress() {
      const percent = (video.currentTime / video.duration) * 100;
      progressBar.style.width = `${percent}%`;
      currentTimeEl.textContent = formatTime(video.currentTime);
    }

    // Configurar controles de video
    video.addEventListener('loadedmetadata', () => {
      durationEl.textContent = formatTime(video.duration);
      const meta = document.querySelector('.video-meta .muted');
      if (meta) {
        meta.textContent = `Duraci√≥n: ${formatTime(video.duration)}`;
      }
    });

    video.addEventListener('timeupdate', updateProgress);
    
    // Detectar rotaci√≥n del video y expandir contenedor
    video.addEventListener('timeupdate', () => {
      const shouldRotate = video.currentTime >= 42 && video.currentTime < 66;
      
      if (shouldRotate) {
        wrapper.classList.add('rotated');
        videoContainer.classList.add('expanded');
      } else {
        wrapper.classList.remove('rotated');
        videoContainer.classList.remove('expanded');
      }
    });

    // Reproducir/pausar
    playPauseBtn.addEventListener('click', () => {
      if (video.paused) {
        video.play();
        playIcon.textContent = '‚ùö‚ùö';
      } else {
        video.pause();
        playIcon.textContent = '‚ñ∂';
      }
    });

    // Saltar a posici√≥n en la barra de progreso
    progressContainer.addEventListener('click', (e) => {
      const rect = progressContainer.getBoundingClientRect();
      const percent = (e.clientX - rect.left) / rect.width;
      video.currentTime = percent * video.duration;
    });

    // Control de volumen
    volumeSlider.addEventListener('click', (e) => {
      const rect = volumeSlider.getBoundingClientRect();
      const percent = (e.clientX - rect.left) / rect.width;
      video.volume = percent;
      volumeLevel.style.width = `${percent * 100}%`;
      
      // Actualizar icono de volumen
      if (percent === 0) {
        volumeIcon.textContent = 'üîá';
      } else if (percent < 0.5) {
        volumeIcon.textContent = 'üîà';
      } else {
        volumeIcon.textContent = 'üîä';
      }
    });

    // Silenciar/activar sonido
    muteBtn.addEventListener('click', () => {
      video.muted = !video.muted;
      if (video.muted) {
        volumeIcon.textContent = 'üîá';
      } else {
        if (video.volume === 0) {
          volumeIcon.textContent = 'üîá';
        } else if (video.volume < 0.5) {
          volumeIcon.textContent = 'üîà';
        } else {
          volumeIcon.textContent = 'üîä';
        }
      }
    });

    // Inicializar volumen
    volumeLevel.style.width = `${video.volume * 100}%`;
    
    // Manejar cambios de tama√±o de ventana
    window.addEventListener('resize', () => {
      // Si cambia entre m√≥vil y desktop, recargar para aplicar los estilos correctos
      const newIsMobile = window.innerWidth <= 768;
      if (newIsMobile !== isMobile) {
        location.reload();
      }
    });
  </script>
</body>
</html>
